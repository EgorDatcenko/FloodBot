# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤ –∏–∑ –∫–∞–Ω–∞–ª–∞

## ‚ùå **–ü–†–û–ë–õ–ï–ú–ê:**
–ë–æ—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª –ø–æ—Å—Ç—ã –∏–∑ –∫–∞–Ω–∞–ª–∞ [@nikitaFlooDed](https://t.me/nikitaFlooDed), —Ö–æ—Ç—è —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–Ω–∞–ª–∞.

## ‚úÖ **–†–ï–®–ï–ù–ò–ï:**
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤ –∏–∑ –∫–∞–Ω–∞–ª–∞:

### 1. **–§—É–Ω–∫—Ü–∏—è `auto_load_new_posts()`** - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ `get_updates()`, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤:
  - `get_chat_history()` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞
  - `get_messages()` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±
  - `get_updates()` - –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 2. **–§—É–Ω–∫—Ü–∏—è `get_posts_by_hashtag()`** - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–∏—Å–∫ —Ö–µ—à—Ç–µ–≥–æ–≤ —Ä–∞–±–æ—Ç–∞–ª —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `get_updates()`
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ `get_chat_history()`

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:**

### –§—É–Ω–∫—Ü–∏—è `auto_load_new_posts()`:
```python
# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ get_updates (—Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ)
updates = await self.application.bot.get_updates(limit=100, timeout=1)
for update_item in updates:
    if update_item.channel_post and update_item.channel_post.chat.username == CHANNEL_USERNAME.replace('@', ''):
        messages.append(update_item.channel_post)

# –ï—Å–ª–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç, –ø–æ–ª—É—á–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∫–∞–Ω–∞–ª–∞
if not messages:
    chat_history = await self.application.bot.get_chat_history(
        chat_id=CHANNEL_USERNAME,
        limit=50
    )
    
    if chat_history:
        messages = list(chat_history)
```

### –§—É–Ω–∫—Ü–∏—è `get_posts_by_hashtag()`:
```python
# –°–ø–æ—Å–æ–± 1: get_updates (–Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
updates = await self.application.bot.get_updates(limit=100, timeout=5)

# –°–ø–æ—Å–æ–± 2: –ò—Å—Ç–æ—Ä–∏—è –∫–∞–Ω–∞–ª–∞
if not posts_with_hashtag:
    chat_history = await self.application.bot.get_chat_history(
        chat_id=CHANNEL_USERNAME,
        limit=100
    )
```

## üìä **–†–ï–ó–£–õ–¨–¢–ê–¢:**
- ‚úÖ –ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ—Å—Ç—ã –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Ö–µ—à—Ç–µ–≥–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞
- ‚úÖ –ù–æ–≤—ã–µ –ø–æ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `get_updates()`
- ‚úÖ –°—Ç–∞—Ä—ã–µ –ø–æ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `get_chat_history()`

## üéØ **–§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Ö–µ—à—Ç–µ–≥–∞–º –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤

## üìù **–õ–û–ì–ò–†–û–í–ê–ù–ò–ï:**
–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- üì• –ü–æ–ª—É—á–µ–Ω–æ X —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞
- ‚úÖ –ù–∞–π–¥–µ–Ω –ø–æ—Å—Ç X —Å —Ö–µ—à—Ç–µ–≥–æ–º Y –≤ –∏—Å—Ç–æ—Ä–∏–∏
- ‚ö†Ô∏è –ò—Å—Ç–æ—Ä–∏—è –∫–∞–Ω–∞–ª–∞ –ø—É—Å—Ç–∞
- ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–∞–Ω–∞–ª–∞

## üöÄ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ:**
–ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ—Å—Ç—ã –∏–∑ –∫–∞–Ω–∞–ª–∞ [@nikitaFlooDed](https://t.me/nikitaFlooDed)!

**–°—Ç–∞—Ç—É—Å: –ò–°–ü–†–ê–í–õ–ï–ù–û** ‚úÖ 