# üéâ –ë–ê–ì –° –ú–ï–î–ò–ê-–ì–†–£–ü–ü–ê–ú–ò –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù!

## üéØ **–ü–†–û–ë–õ–ï–ú–ê –ë–´–õ–ê:**
–ë–æ—Ç —Ç–µ—Ä—è–ª –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Å—Ç–æ–≤ —Å –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø–∞–º–∏:
- ‚ùå –°–æ—Ö—Ä–∞–Ω—è–ª —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ –º–µ–¥–∏–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Å—Ç–µ
- ‚ùå –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å
- ‚ùå –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å
- ‚ùå –ú–µ—Ç–æ–¥ `get_content_with_media_files` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—É—é —Ñ—É–Ω–∫—Ü–∏—é `GROUP_CONCAT`

## ‚úÖ **–ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:**

### 1. **–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã –≤ `database.py`:**
- ‚úÖ `init_media_table()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã post_media
- ‚úÖ `add_media_to_post()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞ –∫ –ø–æ—Å—Ç—É
- ‚úÖ `get_post_media()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –ø–æ—Å—Ç–∞
- ‚úÖ `get_content_with_media_files()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_content_with_media_files`:**
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω `GROUP_CONCAT` –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π `JOIN` (SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç GROUP_CONCAT)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Python
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –ø–æ –ø–æ—Ä—è–¥–∫—É
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Å—Ç–æ–≤

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `post_media` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –Ω–∞ –ø–æ—Å—Ç
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `media_order`

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:**

### –ü—Ä–æ–±–ª–µ–º–∞ —Å GROUP_CONCAT:
```sql
-- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–ª–æ –≤ SQLite:
SELECT c.*, GROUP_CONCAT(pm.media_type || ':' || pm.media_file_id || ':' || pm.media_order) as media_info
FROM content c
LEFT JOIN post_media pm ON c.id = pm.content_id
GROUP BY c.id
```

### ‚úÖ –†–µ—à–µ–Ω–∏–µ —Å JOIN:
```sql
-- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ SQLite:
SELECT c.*, pm.media_type, pm.media_file_id, pm.media_order
FROM content c
LEFT JOIN post_media pm ON c.id = pm.content_id
ORDER BY c.created_at DESC, pm.media_order ASC
```

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ Python:
```python
# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ content_id
content_dict = {}
for row in raw_results:
    row_dict = dict(zip(columns, row))
    content_id = row_dict['id']
    
    if content_id not in content_dict:
        # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø–æ—Å—Ç
        content_dict[content_id] = {...}
    
    # –î–æ–±–∞–≤–ª—è–µ–º –º–µ–¥–∏–∞—Ñ–∞–π–ª, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
    if row_dict['media_type'] and row_dict['media_file_id']:
        media_file = {
            'media_type': row_dict['media_type'],
            'media_file_id': row_dict['media_file_id'],
            'media_order': row_dict['media_order'] or 0
        }
        content_dict[content_id]['media_files'].append(media_file)
```

## üìä **–†–ï–ó–£–õ–¨–¢–ê–¢ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**

### ‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:**
1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ post_media —Å–æ–∑–¥–∞–Ω–∞
2. **–ö–æ–ª–æ–Ω–∫–∞ media_group_id** - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ç–∞–±–ª–∏—Ü—É content
3. **–ú–µ—Ç–æ–¥—ã –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞** - ‚úÖ extract_all_media_info —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - ‚úÖ –ú–µ–¥–∏–∞-–≥—Ä—É–ø–ø—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - ‚úÖ –í—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è
6. **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** - ‚úÖ –ü–æ—Å—Ç—ã –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è
7. **–ü–æ—Ä—è–¥–æ–∫ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤** - ‚úÖ –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ media_order

### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. **–ú–µ–¥–∏–∞-–≥—Ä—É–ø–ø—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ** - –≤—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –∏–∑ –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞ –æ—Å—Ç–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ
2. **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ—Å—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø–∞–º–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞** - –≤—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –Ω–∞ –ø–æ—Å—Ç
5. **–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è** - –≤—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Å—Ç–∞
6. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫** - –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø–æ—Ä—è–¥–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

## üéâ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:**

**–ë–∞–≥ —Å –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø–∞–º–∏ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù!** 

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `GROUP_CONCAT`, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤. –†–µ—à–µ–Ω–∏–µ:
1. –ó–∞–º–µ–Ω–∏—Ç—å `GROUP_CONCAT` –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π `JOIN`
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Python
3. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å –±–æ—Ç:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤ –æ–¥–Ω–æ–º –ø–æ—Å—Ç–µ
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≥—Ä—É–ø–ø–∞–º–∏
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ **–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Å—Ç–∞**
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –ø–æ –ø–æ—Ä—è–¥–∫—É**

### üìã **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
1. –ü–µ—Ä–µ—à–ª–∏—Ç–µ –ø–æ—Å—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏ –≤ –±–æ—Ç–∞
2. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã
3. –ü—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≥—Ä—É–ø–ø–æ–π
4. –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–¥—Ä—É–≥–æ–µ"
5. –ü–æ—Ä—è–¥–æ–∫ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø–∞–º–∏!** üöÄ

### üîß **–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `database.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è
- `bot.py` - –æ–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ show_category_content –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤

### üìÖ **–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 11 –∞–≤–≥—É—Å—Ç–∞ 2025
### üë®‚Äçüíª **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û
### üêõ **–ë–∞–≥:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù 